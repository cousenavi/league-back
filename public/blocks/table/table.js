// Generated by CoffeeScript 1.4.0

(function($) {
  var templates;
  templates = {
    table: function(rows) {
      return "<table class=\"table\"><thead>" + (templates.head()) + "</thead><tbody>" + (rows.join('')) + "</tbody></table>";
    },
    head: function() {
      return "<th>Pos</th>        <th>Team</th>        <th>GP</th>        <th>W</th>        <th>D</th>        <th>L</th>        <th>F</th>        <th>A</th>        <th>GD</th>        <th>PTS</th>        <th>LAST 5</th>";
    },
    row: function(team) {
      var formHtml, html, res, _i, _len, _ref;
      formHtml = '';
      _ref = team.form.slice(-5);
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        res = _ref[_i];
        formHtml += "<img src='/img/circle/";
        formHtml += (res === 'W' ? 'green.png' : res === 'D' ? 'yellow.png' : 'red.png');
        formHtml += "' height='16px' width='16px'>";
      }
      return html = "  <tr>\n    <td>" + team.position + "</td>\n    <td>" + ((team.logo != null) && team.logo !== '' ? "<img style='width: 20px; height: 20px' src='/" + team.logo + "'>&nbsp;" : '') + team.name + "</td>\n    <td>" + team.played + "</td>\n    <td>" + team.won + "</td>\n    <td>" + team.draw + "</td>\n    <td>" + team.lost + "</td>\n    <td>" + team.goalsScored + "</td>\n    <td>" + team.goalsConceded + "</td>\n    <td>" + (team.goalsScored - team.goalsConceded) + "</td>\n    <td>" + team.score + "</td>\n    <td>" + formHtml + "</td>\n</tr>";
    }
  };
  return $.fn.table = function(leagueId) {
    var _this = this;
    return $.getJSON("/tables/simple_table?leagueId=" + leagueId, function(table) {
      var rows, team;
      rows = (function() {
        var _i, _len, _ref, _results;
        _ref = table.teams;
        _results = [];
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          team = _ref[_i];
          _results.push(templates.row(team));
        }
        return _results;
      })();
      return _this.html(templates.table(rows));
    });
  };
})(jQuery);
